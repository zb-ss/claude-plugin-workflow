# Refactor: {{TITLE}}

**Workflow ID:** {{WORKFLOW_ID}}
**Type:** refactor
**Date:** {{DATE}}
**Branch:** {{BRANCH}}
**Mode:** {{MODE}}
**Status:** active

---

## Overview

### Description
{{DESCRIPTION}}

### Branch Info
- **Refactor Branch:** {{BRANCH}}
- **Base Branch:** {{BASE_BRANCH}}

---

## Workflow Steps

### Step 0: Analysis
**Agent:** Plan
**Status:** pending
**Started:**
**Completed:**

#### Objectives
- [ ] Understand current code structure
- [ ] Identify code smells or issues
- [ ] Plan refactoring approach
- [ ] Ensure behavior preservation
- [ ] Identify test coverage needs

#### Analysis Notes

```markdown
# Refactoring Analysis

## Current State
(Describe current code and its issues)

## Problems Identified
-
-
-

## Proposed Changes
-
-
-

## Files to Refactor

## Behavior Preservation Strategy
(How to ensure functionality isn't changed)
```

---

### Step 1: Implementation
**Agent:** focused-build
**Status:** pending
**Started:**
**Completed:**
**Depends On:** Step 0

#### Objectives
- [ ] Apply refactoring changes
- [ ] Maintain existing behavior
- [ ] Improve code quality
- [ ] All tests still pass

#### Changed Files
| File | Action | Description |
|------|--------|-------------|
|      |        |             |

---

### Step 2: Code Review
**Agent:** review
**Status:** pending
**Iteration:** 0/2
**Started:**
**Completed:**
**Depends On:** Step 1

#### Review Criteria
- [ ] Behavior unchanged
- [ ] Code quality improved
- [ ] No unnecessary changes
- [ ] SOLID principles followed

#### Review Log
| Iteration | Verdict | Issues Found | Fixed |
|-----------|---------|--------------|-------|
| 1         |         |              |       |
| 2         |         |              |       |

---

### Step 3: Quality Gate
**Agent:** quality-gate
**Status:** pending
**Started:**
**Completed:**
**Depends On:** Step 2

#### Checks
- [ ] Build passes
- [ ] All tests pass
- [ ] No behavior changes

---

### Step 4: Completion Guard
**Agent:** completion-guard
**Status:** pending
**Started:**
**Completed:**
**Depends On:** Step 3

#### Final Verification
- [ ] Refactoring complete
- [ ] Behavior preserved
- [ ] Code quality improved
- [ ] Ready for commit

---

## Completion Summary

**Completed At:**
**Total Duration:**

### Files Changed
| File | Lines Added | Lines Removed |
|------|-------------|---------------|
|      |             |               |

### Commit Message
```
refactor: (Suggested commit message)
```

---

## Intervention Log
| Timestamp | Phase | User Instruction | Action Taken |
|-----------|-------|------------------|--------------|
|           |       |                  |              |

<!-- MANUAL: User notes below this line are preserved on regeneration -->

