#+TITLE: Bugfix: {{TITLE}}
#+AUTHOR: Claude Code Workflow
#+DATE: {{DATE}}
#+PROPERTY: WORKFLOW_ID {{WORKFLOW_ID}}
#+PROPERTY: WORKFLOW_TYPE bugfix
#+PROPERTY: STATUS active
#+PROPERTY: BRANCH {{BRANCH}}
#+PROPERTY: STATE_FILE {{STATE_FILE}}
#+PROPERTY: TESTS_ENABLED {{TESTS_ENABLED}}
#+PROPERTY: MODE {{MODE}}

* Overview
:PROPERTIES:
:CREATED_AT: {{TIMESTAMP}}
:UPDATED_AT: {{TIMESTAMP}}
:END:

** Bug Description
{{DESCRIPTION}}

** Branch
- Branch: {{BRANCH}}
- Base: {{BASE_BRANCH}}

* Workflow Steps

** TODO Step 0: Investigation
:PROPERTIES:
:AGENT: Plan
:STATUS: pending
:STARTED_AT:
:COMPLETED_AT:
:END:

*** Objectives
- [ ] Reproduce the bug
- [ ] Identify root cause
- [ ] Locate affected code
- [ ] Understand the expected behavior
- [ ] Document findings

*** Investigation Notes
#+BEGIN_SRC markdown
# Bug Investigation

## Reproduction Steps

## Root Cause

## Affected Files

## Expected vs Actual Behavior

## Proposed Fix
#+END_SRC

** TODO Step 1: Implementation
:PROPERTIES:
:AGENT: workflow:executor
:STATUS: pending
:STARTED_AT:
:COMPLETED_AT:
:DEPENDS_ON: Step 0
:END:

*** Objectives
- [ ] Implement the fix
- [ ] Ensure fix addresses root cause
- [ ] No regression introduced
- [ ] Code compiles/runs

*** Changed Files
| File | Action | Description |
|------+--------+-------------|
|      |        |             |

*** Fix Notes
#+BEGIN_SRC markdown
(Implementation notes)
#+END_SRC

** TODO Step 2: Code Review
:PROPERTIES:
:AGENT: workflow:reviewer
:STATUS: pending
:STARTED_AT:
:COMPLETED_AT:
:DEPENDS_ON: Step 1
:ITERATION: 0
:MAX_ITERATIONS: 3
:END:

*** Review Criteria
- [ ] Fix addresses the root cause
- [ ] No new bugs introduced
- [ ] Code quality maintained
- [ ] Edge cases handled

*** Review Log
| Iteration | Verdict | Issues Found | Fixed |
|-----------+---------+--------------+-------|
|         1 |         |              |       |

*** Review Feedback
#+BEGIN_SRC markdown
(Review feedback)
#+END_SRC

** TODO Step 3: Test Writing
:PROPERTIES:
:AGENT: workflow:test-writer
:STATUS: pending
:STARTED_AT:
:COMPLETED_AT:
:DEPENDS_ON: Step 2
:CONDITIONAL: tests_enabled
:END:

*** Objectives
- [ ] Write regression test for this bug
- [ ] Verify bug is fixed
- [ ] Ensure existing tests pass

*** Tests Created
| Test File | Purpose | Status |
|-----------+---------+--------|
|           |         |        |

** TODO Step 4: Completion
:PROPERTIES:
:AGENT: workflow:completion-guard
:STATUS: pending
:STARTED_AT:
:COMPLETED_AT:
:DEPENDS_ON: Step 3
:END:

*** Final Checklist
- [ ] Bug is fixed
- [ ] Regression test added
- [ ] All tests passing
- [ ] Ready for commit

*** Commit Message
#+BEGIN_SRC text
fix: <description>

- Root cause: <explanation>
- Solution: <what was done>

Fixes #<issue-number>
#+END_SRC

* Completion Summary
:PROPERTIES:
:COMPLETED_AT:
:TOTAL_DURATION:
:END:

** Root Cause
** Solution Applied
** Tests Added
** Notes

* Intervention Log
| Timestamp | Phase | User Instruction | Action Taken |
|-----------+-------+------------------+--------------|
|           |       |                  |              |
