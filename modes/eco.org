#+TITLE: Eco Mode Configuration
#+MODE_NAME: eco
#+DESCRIPTION: Token-efficient with haiku-first approach

* Overview

Eco mode minimizes token usage by preferring haiku models
and limiting exploration depth. Best for budget-conscious
usage or simple, well-defined tasks.

* Agent Routing

*CRITICAL: Always use =workflow:= prefixed agents to ensure native tool usage*

| Phase | Subagent Type | Model | Purpose |
|-------|---------------|-------|---------|
| Codebase Analysis | SKIP | - | Use existing context only (no generation) |
| Planning | workflow:architect-lite | haiku | Minimal planning |
| Implementation | workflow:executor-lite | haiku | Direct implementation with native tools |
| Code Review | workflow:reviewer-lite | haiku | Basic review |
| Security | workflow:security-lite | haiku | Quick scan |

*NEVER use built-in agents without =workflow:= prefix*

* Review Chain

#+BEGIN_SRC text
Implementation
     ↓
Code Review (reviewer-lite) → FAIL → Fix → Retry (max 2)
     ↓ PASS
Security Review (security-lite) → FAIL → Fix → Retry (max 1)
     ↓ PASS
COMPLETE
#+END_SRC

* Settings
:PROPERTIES:
:MAX_CODE_REVIEW_ITERATIONS: 2
:MAX_SECURITY_ITERATIONS: 1
:REQUIRE_TESTS: false
:MIN_COVERAGE: 0
:PARALLEL_REVIEWS: false
:EXPLORATION_DEPTH: shallow
:AUTONOMOUS_MODE: true
:MAX_TURNS_EXECUTOR: 15
:MAX_TURNS_REVIEWER: 8
:MAX_TURNS_SECURITY: 8
:MAX_TURNS_ANALYZER: 15
:MAX_TURNS_ARCHITECT: 10
:MAX_TURNS_QUALITY_GATE: 15
:MAX_TURNS_COMPLETION: 10
:MAX_CONTINUATIONS: 2
:END:

* Parallel Execution

Eco mode minimizes parallelism to save tokens:
- Sequential execution only
- Fewer agents = lower overhead

* Token Optimization

** Exploration
- Read only essential files
- Skip deep dependency tracing
- Limit context gathering

** Planning
- Concise plans
- Skip optional sections
- Focus on core changes

** Implementation
- Direct changes only
- Minimal validation
- No exploratory refactoring

** Review
- Pattern-based only
- Skip edge case analysis
- Essential checks only

* Phase Defaults

** Planning
- Use --style=light (JSON state)
- Skip org file creation
- Minimal exploration

** Implementation
- Follow plan exactly
- No deviations
- Minimal error handling additions

** Review
- Security scan: 1 iteration, BLOCKING
- Performance review skipped
- Documentation update skipped

* When to Use

- Simple, clear tasks
- Well-defined bug fixes
- Budget-conscious development
- Tasks with good specifications
- When manual review will follow

* Limitations

- May miss edge cases
- Limited security coverage
- No deep analysis
- Best with clear requirements
