{
  "description": "Workflow plugin hooks for automated validation",
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "tool == 'Edit' && tool_input.file_path matches '\\.ts$'",
        "hooks": [
          {
            "type": "command",
            "command": "npx tsc --noEmit 2>&1 | grep -E \"$(basename \"$CLAUDE_FILE_PATH\")\" | head -5 || true",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "tool == 'Edit' && tool_input.file_path matches '\\.tsx$'",
        "hooks": [
          {
            "type": "command",
            "command": "npx tsc --noEmit 2>&1 | grep -E \"$(basename \"$CLAUDE_FILE_PATH\")\" | head -5 || true",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "tool == 'Edit' && tool_input.file_path matches '\\.php$'",
        "hooks": [
          {
            "type": "command",
            "command": "php -l \"$CLAUDE_FILE_PATH\" 2>&1 || true",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "tool == 'Edit' && tool_input.file_path matches '\\.py$'",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -m py_compile \"$CLAUDE_FILE_PATH\" 2>&1 || true",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "tool == 'Write' && tool_input.file_path matches '\\.json$'",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"import json; json.load(open('$CLAUDE_FILE_PATH'))\" 2>&1 || true",
            "timeout": 3
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "tool == 'Bash' && tool_input.command matches 'rm -rf'",
        "hooks": [
          {
            "type": "block",
            "message": "Blocking dangerous rm -rf command. Use targeted file deletion instead."
          }
        ]
      },
      {
        "matcher": "tool == 'Bash' && tool_input.command matches 'git push --force'",
        "hooks": [
          {
            "type": "block",
            "message": "Blocking force push. This is a destructive operation that requires explicit user approval."
          }
        ]
      }
    ]
  }
}
